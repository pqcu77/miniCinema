<!--
  MiniCinema - API é…ç½®åŠ è½½å™¨
  ç”¨äºåœ¨ ngrok ç¯å¢ƒä¸‹è‡ªåŠ¨é…ç½® API URL
-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>MiniCinema é…ç½®</title>
  <script>
    // è‡ªåŠ¨æ£€æµ‹å¹¶è®¾ç½® API åŸºç¡€ URL
    (function() {
      // è·å–å½“å‰ä¸»æœºåå’Œåè®®
      const protocol = window.location.protocol; // https: æˆ– http:
      const hostname = window.location.hostname;
      const port = window.location.port ? ':' + window.location.port : '';

      // åˆ¤æ–­æ˜¯å¦é€šè¿‡ ngrokï¼ˆæ£€æŸ¥ ngrok ç‰¹å®šçš„ä¸»æœºåæ¨¡å¼ï¼‰
      const isNgrok = hostname.includes('ngrok') || hostname.includes('ngrok-free');

      // æ„å»º API URL
      let apiUrl;
      if (isNgrok) {
        // ngrok ç¯å¢ƒï¼šä½¿ç”¨ç›¸åŒçš„ä¸»æœºåå’Œåè®®
        apiUrl = `${protocol}//${hostname}${port}`;
        console.log('ğŸŒ æ£€æµ‹åˆ° ngrok ç¯å¢ƒï¼ŒAPI URL:', apiUrl);
      } else {
        // æœ¬åœ°ç¯å¢ƒï¼šä½¿ç”¨ localhost:8080
        apiUrl = 'http://localhost:8080';
        console.log('ğŸ  æœ¬åœ°ç¯å¢ƒï¼ŒAPI URL:', apiUrl);
      }

      // ä¿å­˜åˆ° localStorage
      localStorage.setItem('backendUrl', apiUrl);
      window.API_BASE_URL = apiUrl;

      console.log('âœ… API é…ç½®å·²åŠ è½½:', apiUrl);
    })();
  </script>
</head>
<body>
  <p>æ­£åœ¨åŠ è½½ MiniCinema é…ç½®...</p>
</body>
</html>

